[GENERAL]
description = FlyMine

db_adaptor  = Bio::DB::GFF
db_args     = -adaptor dbi::pg
              -dsn dbi:@FLYMINE_GBROWSE_DATABASE_ADAPTOR@:dbname=@FLYMINE_GBROWSE_DATABASE@;host=@FLYMINE_GBROWSE_DATABASE_HOST@
host        = @FLYMINE_GBROWSE_DATABASE_HOST@
user        = @FLYMINE_GBROWSE_DATABASE_USER@
pass        = @FLYMINE_GBROWSE_DATABASE_PASSWORD@

aggregators = processed_transcript
plugins = SequenceDumper FastaDumper RestrictionAnnotator

# list of tracks to turn on by default
default features = Transcripts

# The class of the objects used to establish the reference coordinates.
reference class  = Chromosome

# Web site configuration info
stylesheet  = @FLYMINE_SITE_PREFIX@/style/gbrowse.css
buttons     = /gbrowse/images/buttons
tmpimages   = /gbrowse/tmp

# where to link to when user clicks in detailed view
link          = AUTO

# what image widths to offer
image widths  = 400 600 750 950 1150

# default width of detailed view (pixels)
default width = 750
default features = Transcripts
                   ChromosomeBands

# max and default segment sizes for detailed view
max segment     = 500000
default segment = 50000

# from lookup_features_from_db() - doesn't appear to work
landmark padding = 100

# zoom levels
zoom levels    = 100 200 1000 2000 5000 10000 20000 40000 100000 200000 500000 1000000

# colors of the overview, detailed map and key
overview bgcolor = lightgrey
detailed bgcolor = lightgoldenrodyellow
key bgcolor      = beige

# examples to show in the introduction
examples = Drosophila_melanogaster_chr_X
           Drosophila_melanogaster_chr_2L:270,001..370,000
           Gene:CG2671
           ChromosomeBand:100D

# "automatic" classes to try when an unqualified identifier is given
automatic classes = Symbol Gene Clone Transcript Exon ChromosomeBand Contig Supercontig 

### HTML TO INSERT AT VARIOUS STRATEGIC LOCATIONS ###
# inside the <head></head> section
head =

# at the top...
header =
  <DIV ID="header">
    <H1>
      <A HREF="@FLYMINE_SITE_PREFIX@/">FlyMine</A>
    </H1>
    <P>
      An integrated database for <I>Drosophila</I> and <I>Anopheles</I> genomics
    </P>
  </DIV>
# a footer
footer =
  <HR>       
    For the source code for this browser, see the <A HREF="http://www.gmod.org">
    Generic Model Organism Database Project.</A> 
  <HR>

# this is very hacky - 
html1 = </table><p><table class="searchtitle" border="0" cellspacing="0" width="100%">
html2 = <p>
html3 = <p><div class="whiteboxwithborder">
html4 = </div><p><div class="whiteboxwithborder">
html5 = </div><p><div class="whiteboxwithborder">
html6 = </div>

# Default glyph settings
[TRACK DEFAULTS]
glyph       = generic
height      = 8
bgcolor     = blue
fgcolor     = green
fontcolor   = black
font2color  = grey
label density = 25
bump density  = 100
### keystyle = beneath
link         = sub {
    my $feature = shift;
    my ($id) = $feature->get_tag_values("FlyMineInternalID");
    $id =~ s/FlyMineInternalID_//;
    if (defined $id) {
      return "@FLYMINE_WEBAPP_VIEW_BY_ID_PREFIX@$id";
    } else {
      return undef;
    }
  }

### TRACK CONFIGURATION ####
# the remainder of the sections configure individual tracks

[ChromosomeBands:overview]
feature      = chromosomeband
glyph        = generic
height       = 11
description  = 0
label        = 0
width        = 0
bump         = 0
bgcolor      = sub {
    my $feature = shift;
    my ($index) = $feature->get_tag_values("Index");
    my @tags = $feature->get_all_tags();
    if ($index % 2 == 0) {
      return "gray";
    } else {
      return "#f0f0f0";
    }
  }
key          = Chromosome bands

[ChromosomeBands]
feature      = chromosomeband
glyph        = generic
height       = 7
description  = 0
label        = 1
width        = 0
bump         = 0
bgcolor      = sub {
    my $feature = shift;
    my ($index) = $feature->get_tag_values("Index");
    my @tags = $feature->get_all_tags();
    if ($index % 2 == 0) {
      return "gray";
    } else {
      return "#f0f0f0";
    }
  }
key          = Chromosome bands

[Transcripts]
feature      = processed_transcript gene
glyph        = processed_transcript
bgcolor      = sub {
    my $feature = shift;
    if ($feature->method() eq "gene") {
      return "#5599ff";
    } else {
      return "#88aaff";
    }
  }
fgcolor      = #4455dd
description  = 1
key          = Protein-coding genes

[Genes]
feature      = gene
glyph        = generic
bgcolor      = #5599ff
fgcolor      = #4455dd
description  = 1
strand_arrow = 1
key          = Genes    

[Exons]
feature      = exon
glyph        = generic
bgcolor      = #ffaaff
fgcolor      = #a050a0
description  = 1
key          = Exons

[tRNAs]
feature      = trna
glyph        = generic
bgcolor      = #dddd44
forwardcolor = green
reversecolor = turquoise
strand_arrow = 1
height       = 7
description  = 1
key          = TRNA

[RepeatRegions]
feature      = repeatregion
glyph        = generic
bgcolor      = yellow
fgcolor      = #aaaa00
strand_arrow = 1
height       = 7
description  = 1
key          = Repeat regions

[Contigs]
feature      = contig
glyph        = generic
bgcolor      = #ddddff
strand_arrow = 1
description  = 1
key          = Ensembl contigs   

[Supercontig]
feature      = supercontig
glyph        = generic
bgcolor      = #bbeecc
strand_arrow = 1
description  = 1
key          = Ensembl supercontigs  

[DNA/GC Content]
glyph        = dna
global feature = 1
height       = 40
do_gc        = 1
fgcolor      = red
axis_color   = blue

[DNA]
glyph          = dna
global feature = 1
height         = 40
do_gc          = 0
fgcolor        = red
axis_color     = blue
strand         = both
key            = DNA

[Translation]
glyph          = translation
global feature = 1
height         = 40
fgcolor        = purple
start_codons   = 0
stop_codons    = 1
translation    = 6frame
key            = 6-frame translation

