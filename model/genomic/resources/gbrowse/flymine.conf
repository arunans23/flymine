[GENERAL]
description   = FlyMine

db_adaptor    = Bio::DB::GFF
db_args       = -adaptor dbi::pg
	        -dsn     dbi:Pg:dbname=flymine;host=localhost
host          = merry
user          = kmr
pass          = kmr

aggregators = transcript alignment orf
plugins = SequenceDumper FastaDumper RestrictionAnnotator

# list of tracks to turn on by default
default features = Genes

# The class of the objects used to establish the reference coordinates.
reference class  = Chromosome

# Web site configuration info
stylesheet  = @FLYMINE_SITE_PREFIX@/style/default.css
buttons     = /gbrowse/images/buttons
tmpimages   = /gbrowse/tmp

# where to link to when user clicks in detailed view
link          = AUTO

# what image widths to offer
image widths  = 450 640 800 1024

# default width of detailed view (pixels)
default width = 800
default features = Exons
                   ChromosomeBands
                   RepeatRegions

# max and default segment sizes for detailed view
max segment     = 500000
default segment = 50000

# from lookup_features_from_db() - doesn't appear to work
landmark padding = 100

# zoom levels
zoom levels    = 100 200 1000 2000 5000 10000 20000 40000 100000 200000 500000 1000000

# colors of the overview, detailed map and key
overview bgcolor = lightgrey
detailed bgcolor = lightgoldenrodyellow
key bgcolor      = beige

# examples to show in the introduction
examples = Drosophila_melanogaster_chr_X
	   Drosophila_melanogaster_chr_2L:195,000..205,000

# "automatic" classes to try when an unqualified identifier is given
automatic classes = Symbol Gene Clone Transcript Exon ChromosomeBand Contig Supercontig 

### HTML TO INSERT AT VARIOUS STRATEGIC LOCATIONS ###
# inside the <head></head> section
head =

# at the top...
header =
  <div id="header">
    <h1>
      <a href="http://merry.flymine.org:8180/">FlyMine</a>
    </h1>
    <p>
      An integrated database for <i>Drosophila</i> and <i>Anopheles</i> genomics
    </p>
    <span id="status">
      FlyMine is currently in Beta <a href="http://www.flymine.org/webapp/status.html">[more...]</a>
    </span>
  </div>
  <div id="content">
# a footer
footer = 
       </div>
       <hr>       
	<table width="100%">
	<TR>
	<TD align="left">
	For the source code for this browser, see the <a href="http://www.gmod.org">
	Generic Model Organism Database Project.</a>  For other questions, send
	mail to <a href="mailto:lstein@cshl.org">lstein@cshl.org</a>.
	</TD>
	</TR>
	</table>
	<hr>

# this is hacky - 
html1 = </table><p><table class="searchtitle" border="0" cellspacing="0" width="100%">
html2 = <p>
html3 = <p><div class="whiteboxwithborder">
html4 = </div><p><div class="whiteboxwithborder">
html5 = </div><p><div class="whiteboxwithborder">
html6 = </div>

# Default glyph settings
[TRACK DEFAULTS]
glyph       = generic
height      = 8
bgcolor     = blue
fgcolor     = green
fontcolor   = black
font2color  = grey
label density = 25
bump density  = 100
### keystyle = beneath
link         = sub {
    my $feature = shift;
    my ($id) = $feature->get_tag_values("FlyMineInternalID");
    $id =~ s/FlyMineInternalID_//;
    if (defined $id) {
      return "@FLYMINE_WEBAPP_VIEW_BY_ID_PREFIX@$id";
    } else {
      return undef;
    }
  }

### TRACK CONFIGURATION ####
# the remainder of the sections configure individual tracks

[ChromosomeBands:overview]
feature      = chromosomeband
glyph        = generic
height       = 11
description  = 0
label        = 0
width        = 0
bump         = 0
bgcolor      = sub {
    my $feature = shift;
    my ($index) = $feature->get_tag_values("Index");
    my @tags = $feature->get_all_tags();
    if ($index % 2 == 0) {
      return "red";
    } else {
      return "brown";
    }
  }
key          = Chromosome bands

[ChromosomeBands]
feature      = chromosomeband
glyph        = generic
height       = 7
description  = 0
label        = 1
description  = 0
label        = 0
width        = 0
bump         = 0
bgcolor      = sub {
    my $feature = shift;
    my ($index) = $feature->get_tag_values("Index");
    my @tags = $feature->get_all_tags();
    if ($index % 2 == 0) {
      return "red";
    } else {
      return "brown";
    }
  }
key          = Chromosome bands

[Exons]
feature      = exon
glyph        = generic
bgcolor      = blue
forwardcolor = green
reversecolor = turquoise
strand_arrow = 1
height       = 7
description  = 1
key          = Exons

[tRNAs]
feature      = trna
glyph        = generic
bgcolor      = #dddd44
forwardcolor = green
reversecolor = turquoise
strand_arrow = 1
height       = 7
description  = 1
key          = TRNA

[RepeatRegions]
feature      = repeatregion
glyph        = generic
bgcolor      = yellow
forwardcolor = red
reversecolor = #ff3333
strand_arrow = 1
height       = 7
description  = 1
key          = Repeat regions

# [Contigs]
# feature      = contig
# glyph        = span
# bgcolor      = green
# forwardcolor = #ffff00
# reversecolor = #ff33ff
# strand_arrow = 1
# height       = 7
# description  = 1
# bump         = 0
# key          = Contigs

# [SuperContigs]
# feature      = supercontig
# glyph        = span
# bgcolor      = green
# forwardcolor = #ffff00
# reversecolor = #ff33ff
# strand_arrow = 1
# height       = 7
# description  = 1
# key          = Supercontigs

[DNA/GC Content]
glyph        = dna
global feature = 1
height       = 40
do_gc        = 1
fgcolor      = red
axis_color   = blue

[DNA]
glyph          = dna
global feature = 1
height         = 40
do_gc          = 0
fgcolor        = red
axis_color     = blue
strand         = both
key            = DNA

[Translation]
glyph          = translation
global feature = 1
height         = 40
fgcolor        = purple
start_codons   = 0
stop_codons    = 1
translation    = 6frame
key            = 6-frame translation

